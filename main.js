(()=>{"use strict";class e{constructor(){this.url="https://ahj-homeworks-helpdesk-server.onrender.com"}createForm(){const e=document.createElement("form");e.className="form hidden",e.method="POST",e.action=this.url;const t=document.createElement("h3");t.className="form_title",t.textContent="Добавить тикет",e.appendChild(t);const n=document.createElement("div");n.className="form_body";const o=document.createElement("span");o.className="form_title_1",o.textContent="Кратное описание";const s=document.createElement("input");s.className="form_input_1",s.type="text";const c=document.createElement("span");c.className="form_title_2",c.textContent="Подробное описание";const r=document.createElement("input");r.className="form_input_2",r.type="text",n.appendChild(o),n.appendChild(s),n.appendChild(c),n.appendChild(r),e.appendChild(n);const a=document.createElement("div");a.className="form_button";const d=document.createElement("button");d.className="form_btn_censel",d.textContent="Censel";const l=document.createElement("button");l.className="form_btn_ok",l.textContent=" OK ",a.appendChild(d),a.appendChild(l),e.appendChild(a),document.querySelector(".mein").appendChild(e)}}class t{constructor(e){let{id:t,name:n,description:o,status:s,created:c}=e;this.id=t,this.name=n,this.description=o,this.status=s,this.created=c}}const n=document.getElementById("root"),o=new class{list(e){console.log(`list ${e}`);const t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&console.log(t.responseText)},t.open("GET","https://ahj-homeworks-helpdesk-server.onrender.com/?method=allTickets"),t.send()}get(e,t){console.log(`get ${e} ${t}`);const n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&console.log(n.responseText)},n.open("GET","https://ahj-homeworks-helpdesk-server.onrender.com/?method=ticketById&id="+e),n.send()}create(e,t){console.log(`create ${e} ${t}`);const n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&console.log(n.responseText)},n.open("POST","https://ahj-homeworks-helpdesk-server.onrender.com/?method=createTicket"),n.send()}update(e,t,n){console.log(`update ${e} ${t} ${n}`);const o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&console.log(o.responseText)},o.open("POST","https://ahj-homeworks-helpdesk-server.onrender.com/?method=updateById&id="+e),o.send()}delete(e,t){console.log(`delete ${e} ${t}`);const n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&console.log(n.responseText)},n.open("GET","https://ahj-homeworks-helpdesk-server.onrender.com/?method=deleteById&id="+e),n.send()}},s=new class{constructor(t,n){if(!(t instanceof HTMLElement))throw new Error("This is not HTML element!");this.container=t,this.ticketService=n,this.ticketForm=new e}init(){console.info("init"),this.ticketForm.createForm();const e=document.querySelector(".btn_add_ticket"),n=document.querySelector(".form_btn_censel"),o=document.querySelector(".mein"),s=o.querySelector(".form"),c=o.querySelector(".form_title_1"),r=o.querySelector(".form_title_2");e.addEventListener("click",(e=>{e.preventDefault(),s.classList.remove("hidden")})),n.addEventListener("click",(e=>{e.preventDefault(),s.classList.add("hidden")}));let a=new XMLHttpRequest;s.addEventListener("submit",(e=>{e.preventDefault();const n=new t(null,c,r,!1,new Date);a.onreadystatechange=function(){4===a.readyState&&console.log(a.responseText)};let o=JSON.stringify(n);a.open("POST","https://ahj-homeworks-helpdesk-server.onrender.com/?method=createTicket"),a.setRequestHeader("Content-type","application/json; charset=utf-8"),a.send(o)})),a.addEventListener("load",(()=>{if(a.status>=200&&a.status<300)try{const e=JSON.parse(a.responseText);console.log(e)}catch(e){console.error(e)}}))}}(n,o);s.init()})();